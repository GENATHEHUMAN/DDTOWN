<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="jakarta.tags.core" prefix="c"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/pages/admin_portal.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script type="text/javascript" src="${pageContext.request.contextPath}/resources/ckeditorInquiry/ckeditor.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.10/dist/sweetalert2.min.css">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.10/dist/sweetalert2.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/admin-lte@3.1/dist/js/adminlte.min.js"></script>

<style type="text/css">

 /* admin_member_detail.html에서 가져온 스타일 */
.detail-card { background-color: #fff; border: 1px solid #e7eaf3; border-radius: 8px; padding: 25px; box-shadow: 0 1px 3px rgba(0,0,0,0.04); }
.detail-card h3 { font-size: 1.3em; color: #2c3e50; margin-top: 0; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 1px solid #eee; }

.info-list { list-style: none; padding: 0; margin: 0; overflow: hidden; /* float 해제 */ }
.info-list dt {
    font-weight: 600; /* admin_portal.css의 .ea-form label과 유사하게 */
    color: #333;      /* admin_portal.css의 .ea-form label과 유사하게 */
    width: 120px; 
    float: left;
    clear: left;
    margin-bottom: 1rem; /* admin_portal.css의 .ea-form .form-group과 유사하게 */
    line-height: 38px; 
    padding-right: 10px; /* 우측 여백 추가 */
    box-sizing: border-box;
}
.info-list dd {
    margin-left: 130px; 
    margin-bottom: 1rem; /* admin_portal.css의 .ea-form .form-group과 유사하게 */
    color: #333;
    min-height: 38px; 
    display: flex; 
    align-items: center;
}
/* 입력 필드 스타일은 admin_portal.css의 .ea-form input, select 스타일을 최대한 활용하도록 class 부여 고려 */
.info-list dd input[type="text"],
.info-list dd input[type="email"],
.info-list dd select {
    width: calc(100% - 22px); 
    padding: .75rem .9rem; /* admin_portal.css .ea-form input과 동일하게 */
    font-size: .95rem;    /* admin_portal.css .ea-form input과 동일하게 */
    line-height: 1.5;     /* admin_portal.css .ea-form input과 동일하게 */
    color: #495057;       /* admin_portal.css .ea-form input과 동일하게 */
    background-color: #fff;
    border: 1px solid #ced4da; /* admin_portal.css .ea-form input과 동일하게 */
    border-radius: .25rem;   /* admin_portal.css .ea-form input과 동일하게 */
    box-sizing: border-box;
    height: 38px; /* 일관성 유지 */
}
 .info-list dd select {
    width: auto; /* select는 내용에 맞게 */
    min-width: 150px;
}

.info-list dd span.view-mode-text { 
    padding: 8px 0; 
    display: inline-block; /* span도 높이를 가지도록 */
    line-height: 22px; /* 기본 텍스트 줄 높이 */
}
.status-badge-in-detail { /* 상세 정보 내 상태 뱃지 */
     padding: 5px 10px; border-radius: 12px; font-size: 0.8em; font-weight: 500; color: white; display:inline-block;
}
.status-badge-in-detail.normal { background-color: #2ecc71; } /* 정상 */
.status-badge-in-detail.suspended { background-color: #f39c12; } /* 활동정지 */
.status-badge-in-detail.banned { background-color: #e74c3c; } /* 블랙리스트 */
.status-badge-in-detail.dormant { background-color: #7f8c8d; } /* 휴면 */

/* 삭제 버튼 스타일 */
.delete-member-btn {
    background-color: #e74c3c;
    color: white;
    border: none;
    margin-left: 10px;
}
.delete-member-btn:hover {
    background-color: #c0392b;
}

</style>
</head>
<script type="text/javascript">

$(function(){
	
	$("#editMemberInfoBtn").on("click",function(){
		$("#editMemberName").attr("style","display:block");
		
	});
});

</script>
<body>
<main class="emp-content">
	<section id="memberDetailSection" class="ea-section">
		<div class="ea-section-header">
            <h2 id="memberDetailTitle">회원 상세 정보</h2>
            <a href="/admin/community/member/main" class="ea-btn outline sm"><i class="fas fa-list"></i> 목록으로</a>
        </div>
        
        <div class="detail-card basic-info">
        	<h3>기본 정보 
                <button type="button" class="ea-btn sm delete-member-btn" id="deleteMemberBtn" style="float: right; margin-top: -5px; margin-right: 10px;"><i class="fas fa-trash-alt"></i> 회원 삭제</button>
                <button type="button" class="ea-btn sm outline" id="editMemberInfoBtn" style="float: right; margin-top: -5px;"><i class="fas fa-edit"></i> 정보 수정</button>
            </h3>
	        <form id="memberInfoForm">
	        	<dl class="info-list">
	        		<dt>아이디:</dt>
	                <dd><span class="view-mode-text" id="detailMemberId">${memberVO.memUsername }</span></dd>
	                
		        	<dt>이름:</dt>
		            <dd>
		                <span class="view-mode-text" id="detailMemberName">${memberVO.memUsername }</span>
		                <input type="text" id="editMemberName" name="memberName" style="display:none;" class="ea-form-control">
		            </dd>
		            
		            <dt>닉네임:</dt>
	                <dd>
	                    <span class="view-mode-text" id="detailMemberNickname">${memberVO.memNicknm }</span>
	                    <input type="text" id="editMemberNickname" name="memberNickname" style="display:none;" class="ea-form-control">
	                </dd>
	
	                <dt>이메일:</dt>
	                <dd>
	                    <span class="view-mode-text" id="detailMemberEmail">${memberVO.peopleVO.peoEmail }</span>
	                    <input type="email" id="editMemberEmail" name="memberEmail" style="display:none;" class="ea-form-control">
	                </dd>
	
	                <dt>가입일:</dt>
	                <dd><span class="view-mode-text" id="detailMemberJoinDate">${memberVO.memRegDate }</span></dd>
	
	                <dt>가입경로:</dt>
	                <dd><span class="view-mode-text">${memberVO.memRegDetCode }</span>
	                
	                <dt>회원 상태:</dt>
	                <dd>
	                	<c:choose>
              				<c:when test="${memberVO.memStatDetCode eq '정상'}">
              					<span class="status-badge answered">${memberVO.memStatDetCode }</span>
              				</c:when>
              				<c:when test="${memberVO.memStatDetCode eq '정지' }">
              					<span class="status-badge pending">${memberVO.memStatDetCode }</span>
              				</c:when>
              				<c:otherwise>
              					<span class="status-badge danger">${memberVO.memStatDetCode }</span>
              				</c:otherwise>
              			</c:choose>
	                    <select id="editMemberStatus" name="memberStatus" style="display:none;" class="ea-filter-select"> 
	                        <option value="active">정상</option>
	                        <option value="suspended">활동정지</option>
	                        <option value="banned">블랙리스트</option>
	                        <option value="dormant">휴면</option>
	                    </select>
	                </dd>
	        	</dl>
	        	<div class="ea-form-actions" id="formActionButtons" style="display:none;">
	                <button type="button" class="ea-btn outline" id="cancelEditBtn">취소</button>
	                <button type="submit" class="ea-btn primary" id="saveMemberInfoBtn">저장</button>
	            </div>
	        </form>
        </div>
	</section>
</main>
</body>
</html>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="jakarta.tags.core" prefix="c"%>
<%@ taglib uri="jakarta.tags.fmt" prefix="fmt" %>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>전체 회원 관리</title>
<link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/pages/admin_portal.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script type="text/javascript" src="${pageContext.request.contextPath}/resources/ckeditorInquiry/ckeditor.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.10/dist/sweetalert2.min.css">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.10/dist/sweetalert2.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/admin-lte@3.1/dist/js/adminlte.min.js"></script>
</head>
<body>
<main class="emp-content">
	<section class="ea-section">
		<div class="ea-section-header">
			<h2>전체 회원 관리</h2>
			<div class="ea-header-actions">
				<input type="text" id="memberSearchInput" class="ea-search-input" placeholder="아이디, 이름, 닉네임, 이메일 검색">
                <select id="memberStatusFilter" class="ea-filter-select">
                    <option value="all">전체 상태</option>
                    <option value="정상">정상</option>
                    <option value="활동정지">활동정지</option>
                    <option value="블랙리스트">블랙리스트</option>
                </select>
                <button type="button" id="memberSearchButton" class="ea-btn primary"><i class="fas fa-search"></i> 검색</button>
			</div>
		</div>
			
			<table class="ea-table" id="memberListTable">
                <thead>
                    <tr>
                        <th>번호</th>
                        <th>아이디</th>
                        <th>이름</th>
                        <th>닉네임</th>
                        <th>이메일</th>
                        <th>상태</th>
                        <th>가입일</th>
                        <th>관리</th>
                    </tr>
                </thead>
                <tbody id="memberTableBody">
                	<c:forEach items="${memberVO }" var="vo">
                		<tr>
                			<td>${vo.rowNum }</td>
                			<td>
                				<a href="/admin/community/member/detail/${vo.memUsername }" class="member-id-link">
	                			${vo.memUsername }
                				</a>
                			</td>
                			<td>${vo.peopleVO.fullName }</td>
                			<td>
                			${vo.memNicknm }
                			${vo.memStatDetCode}
                				<c:if test="${vo.peopleVO.userTypeCode == 'UTC002' }">
                					<img alt="아티스트 인증 마크" src="${pageContext.request.contextPath }/resources/img/verified.png" style="width: 15px; height: 15px;">
                				</c:if>
                			</td>
                			<td>${vo.peopleVO.peoEmail }</td>
                			<c:choose>
                				<c:when test="${vo.memStatDetCode eq '정상'}">
                					<td><span class="status-badge answered">${vo.memStatDetCode }</span></td>
                				</c:when>
                				<c:when test="${vo.memStatDetCode eq '정지' }">
                					<td><span class="status-badge pending">${vo.memStatDetCode }</span></td>
                				</c:when>
                				<c:otherwise>
                					<td><span class="status-badge danger">${vo.memStatDetCode }</span></td>
                				</c:otherwise>
                			</c:choose>
                			<td>${vo.memRegDate }</td>
                			<td><button class="ea-btn sm outline" data-member-id="${vo.memUsername }" onclick="javascript:location.href='/admin/community/member/detail/${vo.memUsername}'"><i class="fas fa-eye"></i>보기</button>
                		</tr>
                	</c:forEach>
                </tbody>
            </table>
	</section>
</main>
</body>
</html>
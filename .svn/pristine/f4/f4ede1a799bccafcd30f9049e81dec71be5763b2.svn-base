<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="kr.or.ddit.ddtown.mapper.emp.schedule.IScheduleMapper">
 	<resultMap type="kr.or.ddit.vo.schedule.ScheduleVO" id="scheduleList">
		<result property="id" column="id"/>
		<result property="title" column="TITLE"/>
		<result property="start" column="start"/>
		<result property="end" column="end"/>
		<result property="textColor" column="TEXT_COLOR"/>
		<result property="backgroundColor" column="BACKGROUND_COLOR"/>
		<result property="url" column="URL"/>
		<result property="allDayStatus" column="all_day_status"/>
		
		<collection property="detailVO" resultMap="detail" />
 	</resultMap>
 	
 	<resultMap type="kr.or.ddit.vo.schedule.ScheduleDetailVO" id="detail">
 		<result property="place" column="PLACE"/>
 		<result property="artGroupNo" column="ART_GROUP_NO"/>
 		<result property="content" column="CONTENT"/>
 	</resultMap>
 
 	<select id="getList" parameterType="String" resultMap="scheduleList" >
 		select 
 		  ART_SCHEDULE_NO as "id"
 		, ART_GROUP_NO
 		, TITLE
 		, START_DATE as "start"
 		, END_DATE as "end"
 		, PLACE
 		, CONTENT
 		, TEXT_COLOR
 		, URL
 		, BACKGROUND_COLOR
 		, ALL_DAY as all_day_status
		from ARTIST_SCHEDULE
		where ART_GROUP_NO = (select ART_GROUP_NO
		                      from artist_group
		                      where emp_username = #{empUsername})
 	</select>
 	
 	<select id="getDes" parameterType="int" resultType="kr.or.ddit.vo.schedule.ScheduleDetailVO">
 		select 
	 		place,
			content
		from artist_schedule
		where art_schedule_no = #{id}
 	</select>
 
 </mapper>
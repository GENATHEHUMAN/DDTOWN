package kr.or.ddit.ddtown.mapper.chat.dm;

import java.util.Date;
import java.util.List;

import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Param;

import kr.or.ddit.vo.chat.dm.ChatChannelVO;
import kr.or.ddit.vo.chat.dm.ParticipantsVO;

@Mapper
public interface ChatChannelMapper {

	// 모든 채팅방 조회 (최신순)
	List<ChatChannelVO> findAllChannels(String username);
	
	// 채널 번호로 채팅방 조회
	ChatChannelVO selectRoomByChannelNo(int chatChannelNo);
	
	// 새로운 채팅방 삽입
	int insertChatChannel(ChatChannelVO chatRoom);
	
	// 마지막 일자 업데이트 (채팅 메세지 전송 시 사용)
	int updateChatLastDate(@Param("chatChannelNo") int chatChannelNo, 
			@Param("chatLastDate") Date chatLastDate);
	
	// 채팅방 삭제
	int deleteChatRoom(int chatChannelNo);
	
	// 해당 채널의 커뮤니티 프로필 번호 조회
	Integer selectComuProfileNoByChannelNo(Integer chatChannelNo);

	// 아티스트 아이디 조회
	String selectArtistUsernameByComuProfileNo(Integer comuProfileNo);

	// 참여자 저장
	void insertParticipant(ParticipantsVO artistParticipant);

	// 채널 상세 정보 가져오기
	ChatChannelVO selectChatChannelDetailByChannelNo(Integer chatChannelNo);

	// 채널에 대한 아티스트 정보 가져오기
	ChatChannelVO selectChatChannelWithArtistInfo(Integer chatChannelNo);

	// 채널 정보 가져오기
	ChatChannelVO selectChatChannelInfoByChannelNo(Integer chatChannelNo);
	
}
